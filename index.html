<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dog Attendance / Payments</title>
<style>
  body {font-family: Arial, sans-serif; padding: 20px; background: #f7fafc;}
  .container {max-width: 900px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.06);}
  h1 {margin-bottom: 12px;}
  .date-btn {padding: 10px 18px; font-size: 16px; margin-bottom: 18px;}
  .dog-buttons {display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 18px;}
  .dog-buttons button {padding: 8px 14px; cursor: pointer; border-radius: 8px; border: 1px solid #888; background: #e2e8f0;}
  .dog-buttons button.active {background: #2b6cb0; color: #fff;}
  table {width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px;}
  th, td {padding: 8px; border: 1px solid #ddd; text-align: right;}
  th {background: #f1f5f9; text-align: left;}
  td.currency {white-space: nowrap;}
</style>
</head>
<body>
<div class="container">
  <h1>Dog Attendance / Payments</h1>

  <button id="dateBtn" class="date-btn"></button>
  <input type="date" id="dateInput" style="display:none; margin-bottom:18px;" />

  <div class="dog-buttons" id="dogButtons"></div>

  <table id="paymentTable">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Total</th>
        <th>PABLO</th>
        <th>LILI</th>
        <th>JUGNIA</th>
        <th>LEO</th>
        <th>INDIA</th>
        <th>CHUFI</th>
        <th>CUSCO</th>
        <th>KIMCHI</th>
        <th>NINA</th>
        <th>CARMELA</th>
        <th>LUPE</th>
        <th>CUATRI</th>
        <th>TB</th>
        <th>NEO</th>
        <th>BRISO</th>
        <th>ZOZI</th>
        <th>R&H</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      <!-- rows inserted by script -->
    </tbody>
  </table>
</div>

<script>
const dogNames = ["PABLO","LILI","JUGNIA","LEO","INDIA","CHUFI","CUSCO","KIMCHI","NINA","CARMELA","LUPE","CUATRI","TB","NEO","BRISO","ZOZI","R&H"];
let rows = [];

// Initialize today
let currentDate = new Date();
const dateBtn = document.getElementById('dateBtn');
const dateInput = document.getElementById('dateInput');
const dogButtonsDiv = document.getElementById('dogButtons');
const tbody = document.getElementById('tableBody');

function formatDate(d){
  const dd = String(d.getDate()).padStart(2,'0');
  const mm = String(d.getMonth()+1).padStart(2,'0');
  const yyyy = d.getFullYear();
  return `${dd}/${mm}/${yyyy}`;
}

function updateDateBtn(){
  dateBtn.textContent = formatDate(currentDate);
}

// Toggle date input
dateBtn.addEventListener('click',()=>{
  dateInput.valueAsDate = currentDate;
  dateInput.style.display = 'inline-block';
});

dateInput.addEventListener('change',(e)=>{
  currentDate = new Date(e.target.value);
  updateDateBtn();
  dateInput.style.display = 'none';
  buildTable();
});

// Create dog buttons
dogNames.forEach(name=>{
  const btn = document.createElement('button');
  btn.textContent = name;
  btn.addEventListener('click',()=>{
    btn.classList.toggle('active');
    updateDogPayment(name, btn.classList.contains('active'));
  });
  dogButtonsDiv.appendChild(btn);
});

function findRowByDate(dateStr){
  return rows.find(r=>r.Fecha===dateStr);
}

function updateDogPayment(dogName, add){
  const dateStr = formatDate(currentDate);
  let row = findRowByDate(dateStr);
  if(!row){
    row = {Fecha: dateStr, Total: 0};
    dogNames.forEach(d=>row[d]=0);
    rows.push(row);
  }
  if(add){
    row[dogName] += 10;
    row.Total +=10;
  }else{
    row[dogName] -=10;
    row.Total -=10;
  }
  buildTable();
}

function buildTable(){
  tbody.innerHTML='';
  rows.sort((a,b)=>new Date(a.Fecha.split('/').reverse().join('-')) - new Date(b.Fecha.split('/').reverse().join('-')));
  rows.forEach(r=>{
    const tr = document.createElement('tr');
    const tdFecha = document.createElement('td'); tdFecha.textContent = r.Fecha; tr.appendChild(tdFecha);
    const tdTotal = document.createElement('td'); tdTotal.textContent = r.Total+' â‚¬'; tdTotal.classList.add('currency'); tr.appendChild(tdTotal);
    dogNames.forEach(d=>{
      const td = document.createElement('td');
      td.textContent = r[d]||'';
      td.classList.add('currency');
      tr.appendChild(td);
    });
    tbody.appendChild(tr);
  });
}

// initialize
updateDateBtn();
buildTable();
</script>
</body>
</html>
